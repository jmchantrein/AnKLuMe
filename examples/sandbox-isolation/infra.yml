---
# infra.yml â€” Primary Source of Truth (PSOT)
#
# Maximum isolation sandbox: ephemeral containers with no external
# network access. Designed for testing untrusted software safely.
#
# IPs: anklume -> 10.100.0.x (admin), sandbox -> 10.150.0.x (disposable)

project_name: sandbox-isolation

global:
  addressing:
    base_octet: 10
    zone_base: 100
  default_os_image: "images:debian/13"
  default_connection: community.general.incus
  default_user: root

domains:
  anklume:
    trust_level: admin
    description: "Administration and orchestration"
    machines:
      sbx-admin:
        description: "Ansible controller"
        type: lxc
        config:
          security.nesting: "true"
        roles:
          - base_system

  sandbox:
    trust_level: disposable
    description: "Isolated sandbox for untrusted software"
    ephemeral: true
    machines:
      sbx-test:
        description: "Disposable test container (lightweight isolation)"
        type: lxc
        ephemeral: true
        roles:
          - base_system
      sbx-vm:
        description: "Disposable VM sandbox (hardware-level isolation)"
        type: vm
        ephemeral: true
        config:
          limits.cpu: "2"
          limits.memory: "2GiB"
        roles:
          - base_system
      sbx-monitor:
        description: "Monitoring container (observes sandbox instances)"
        type: lxc
        roles:
          - base_system
