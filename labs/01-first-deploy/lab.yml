---
# Lab 01: First Deployment
# Create two containers in a single domain and verify connectivity.

title: "First Deployment"
description: >-
  Learn the anklume workflow by creating your first domain with two
  LXC containers. You will edit infra.yml, generate Ansible files
  with anklume sync, deploy with anklume domain apply, and verify that both
  containers are running and can communicate on the same subnet.

difficulty: beginner
duration: "30m"

prerequisites: []

objectives:
  - "Understand the infra.yml -> anklume sync -> anklume domain apply workflow"
  - "Create a domain with two LXC containers"
  - "Verify containers are running via incus list"
  - "Confirm intra-domain connectivity with ping"

steps:
  - id: "01"
    title: "Create the infrastructure"
    instruction_file: "steps/01-create-infra.md"
    hint: "Copy the lab's infra.yml to the project root and run anklume sync"
    validation: "test -f inventory/lab-net.yml && test -f group_vars/lab-net.yml"
  - id: "02"
    title: "Deploy and verify"
    instruction_file: "steps/02-verify.md"
    hint: "Run anklume domain apply, then use incus list to check container status"
    validation: "incus list --project lab-net --format csv -c s 2>/dev/null | grep -qc RUNNING"
  - id: "03"
    title: "Clean up"
    instruction_file: "steps/03-cleanup.md"
    hint: "Use anklume flush or incus delete to remove lab resources"
